<?xml version="1.0"?>
<pipeline>
	<version>2.0.0</version>
    <refashandle>no</refashandle>
	<environment>
		<fsldir>/cubric/software/fsl.versions/5.0.9/bin/</fsldir>
		<edtidir>/cubric/software/exploredti.versions/4.8.6/</edtidir>
		<pipedir>https://gitlab.cubric.cf.ac.uk/scm6gp/DiffusionAdvanced/repository/2.0.0/archive.zip</pipedir>
	</environment>
    <reporting>on</reporting>
    <image>
		<ref>charmedDWI</ref>
        	<handle>charmed</handle>
		<class>DWimage</class>
		<report>yes</report>
		<preproc>
			<method>DWI_preproc_drift</method>
			<order>2</order>
		</preproc>
	</image>
	<image>
		<ref>axcDWI</ref>
        	<handle>axc</handle>
		<class>DWimage</class>
		<report>yes</report>
		<preproc>
			<method>DWI_preproc_drift</method>
			<order>2</order>
		</preproc>
	</image>
	<processing>
        	<process>
			<method>DWI_merge</method>
		    	<handle>axc</handle>
		    	<report>yes</report>
		</process>
		<process>
			<method>DWI_proc_eddy_refb0</method>
            		<handle>charmed</handle>
			<ref>common</ref>
		</process>
        	<process>
			<method>DWI_proc_eddy_refb0</method>
            		<handle>axc</handle>
			<ref>common</ref>
		</process>
		<process>
			<method>DWI_proc_drift</method>
            		<order>2</order>
		</process>
        	<process>
			<method>DWI_proc_disco</method>
		</process>
		<process>
			<method>DWI_proc_gibbs_SubVoxShift</method>
		</process>
        	<process>
		    <method>DWI_proc_dRL_calc_FOD</method>
		    <lambda>0.9</lambda>
		    <beta>0.00076</beta>
		    <iter>200</iter>
		    <rr>8</rr>
		    <nn>0.04</nn>
		    <lmax>8</lmax>
		    <alphaMode>0</alphaMode>
		    <shell>2400</shell>
		</process>
		<process>
		    <method>DWI_proc_extract_FOD_peaks</method>
            	    <handle>charmed</handle>
		    <minval>0.05</minval>
		    <maxnum>3</maxnum>
		</process>
		<process>
			<method>DWI_proc_pismap</method>
		</process>
		<process>
			 <method>DWI_proc_pismap</method>
		</process>
       		<process>
			<method>mdt_wrapper</method>
                    <model>
                        <model_name>CHARMED_r1 (Cascade)</model_name>
                        <handle>charmed</handle>
                        <parsinomy>0</parsinomy>
                    </model>
                    <model>
                        <model_name>CHARMED_r2 (Cascade)</model_name>
                        <handle>charmed</handle>
                        <parsinomy>0</parsinomy>
                    </model>
                    <model>
                        <model_name>AxCaliberP_r1</model_name>
                        <handle>axc</handle>
                            <prior>
                                <source>
                                    <model>CHARMED_r1 (Cascade)</model>
                                    <compartment>CHARMEDRestricted0</compartment>
                                    <parameter>theta</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr0</compartment>
                                    <parameter>theta</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r1 (Cascade)</model>
                                    <compartment>CHARMEDRestricted0</compartment>
                                    <parameter>phi</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr0</compartment>
                                    <parameter>phi</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r1 (Cascade)</model>
                                    <compartment>w_res0</compartment>
                                    <parameter>w</parameter>
                                </source>
                                <target>
                                    <compartment>w_res0</compartment>
                                    <parameter>w</parameter>
                                </target>
                                <type>2</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r1 (Cascade)</model>
                                    <compartment>w_hin0</compartment>
                                    <parameter>w</parameter>
                                </source>
                                <target>
                                    <compartment>w_hin0</compartment>
                                    <parameter>w</parameter>
                                </target>
                                <type>2</type>
                            </prior>
                    </model>
                    <model>
                        <model_name>AxCaliberP_r2</model_name>
                        <handle>axc</handle>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>CHARMEDRestricted0</compartment>
                                    <parameter>theta</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr0</compartment>
                                    <parameter>theta</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>CHARMEDRestricted0</compartment>
                                    <parameter>phi</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr0</compartment>
                                    <parameter>phi</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>CHARMEDRestricted1</compartment>
                                    <parameter>theta</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr1</compartment>
                                    <parameter>theta</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>CHARMEDRestricted1</compartment>
                                    <parameter>phi</parameter>
                                </source>
                                <target>
                                    <compartment>CylindersPoissonDistr1</compartment>
                                    <parameter>phi</parameter>
                                </target>
                                <type>1</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>w_res0</compartment>
                                    <parameter>w</parameter>
                                </source>
                                <target>
                                    <compartment>w_res0</compartment>
                                    <parameter>w</parameter>
                                </target>
                                <type>2</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>w_res1</compartment>
                                    <parameter>w</parameter>
                                </source>
                                <target>
                                    <compartment>w_res1</compartment>
                                    <parameter>w</parameter>
                                </target>
                                <type>2</type>
                            </prior>
                            <prior>
                                <source>
                                    <model>CHARMED_r2 (Cascade)</model>
                                    <compartment>w_hin0</compartment>
                                    <parameter>w</parameter>
                                </source>
                                <target>
                                    <compartment>w_hin0</compartment>
                                    <parameter>w</parameter>
                                </target>
                                <type>2</type>
                            </prior>
                    </model>
            <py_path>/home/sapch6/bin/miniconda3/bin/python</py_path>
		</process>
	</processing>
</pipeline>
